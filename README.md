Data Engineer Take-Home Assessment
## Overview
This project demonstrates my skills in building an end-to-end data pipeline, from data collection to storage, and to data retrieval through a custom API. The project involves working with the NIST NVD CVE API, storing the collected data in a MySQL database, and designing a REST API.


Ensure you have the following installed:

- Python 3.8+
- MySQL
- Git
- Flask
- Swagger
- ReDoc

Install required Python packages:
   
    pip install requests pymysql flask flask-mysqldb
  


Clone the repository:

    git clone https://github.com/polinahell/cve-test.git
    cd cve-test
  

### Data Collection

Run the data collection script:
  
    python data_collection.py
  

This script fetches CVE data from the NIST NVD API https://nvd.nist.gov/developers/vulnerabilities and saves it in a JSON file (cve_data.json).

### Database Setup
Start your MySQL server and create a database.
Access the MySQL command line interface by opening a terminal or command prompt and typing the following command:

    
    mysql -u username -p
   

For create database: 
    
    CREATE DATABASE cve;
    

### Database Schema
The database schema consists of several tables to efficiently store CVE data with appropriate normalization and indexing. 
You can find the SQL scripts to create database in the [ file.](design_schema.txt).

### Data Loading

Run the data loading script:

    python data_load.py


### Data Analysis

You can find the SQL scripts to analyse the data in [ file.](data_analysis.txt).


# API Development

The API will be accessible at http://127.0.0.1:5000/.


### Overview

This API provides access to CVE data stored in a MySQL database. It allows querying the data based on various parameters.

## Endpoints

### Get CVE by ID

- **URL:** `/cve/<cve_id>`
- **Method:** `GET`
- **URL Params:**
  - `cve_id=[string]` - The ID of the CVE.
- **Success Response:**
  - **Code:** 200
  - **Content:** `{ "CVE_ID": "CVE-1999-0211", "Description": "...", ... }`
- **Error Response:**
  - **Code:** 404
  - **Content:** `{ "error": "CVE not found" }`

### Get CVEs by Severity

- **URL:** `/cve/severity`
- **Method:** `GET`
- **URL Params:**
  - `severity=[string]` - The severity level (e.g., "HIGH", "MEDIUM", "LOW").
- **Success Response:**
  - **Code:** 200
  - **Content:** `[ { "CVE_ID": "CVE-1999-0211", "Description": "...", ... }, ... ]`

### Get Top 10 Vulnerabilities by Impact Score

- **URL:** `/cve/top-impact`
- **Method:** `GET`
- **Success Response:**
  - **Code:** 200
  - **Content:** `[ { "CVE_ID": "CVE-1999-0211", "ImpactScore": 10.0 }, ... ]`

### Get Top 10 Vulnerabilities by Exploitability Score

- **URL:** `/cve/top-exploitability`
- **Method:** `GET`
- **Success Response:**
  - **Code:** 200
  - **Content:** `[ { "CVE_ID": "CVE-1999-0211", "ExploitabilityScore": 10.0 }, ... ]`


### Get Worst products
- **URL:** `/cve/worst-products`
- **Method:** `GET`
  - **Code:** 200


### Get Worst platforms
- **URL:** `/cve/worst-platforms`
- **Method:** `GET`
  - **Code:** 200


## Setup

1. Install dependencies:
    ```sh
    pip install flask
    ```

    ```sh
    pip install flask flask-mysqldb
    ```

    Install Flask-Swagger-UI:
 
    ```sh
    pip install flask-swagger-ui
    ```

Create a static directory and place swagger.yaml inside it.
    ```sh
    mkdir static
    mv swagger.yaml static/
    ```

2. Configure the database in `app.py`:
    ```sh
    app.config['MYSQL_HOST'] = 'localhost'
    app.config['MYSQL_USER'] = 'root'
    app.config['MYSQL_PASSWORD'] = 'password'
    app.config['MYSQL_DB'] = 'cve'
    ```

3. Run the application:
    ```sh
    python app.py
    ```


## Conclusion
This project showcases the complete pipeline from data collection and storage to data analysis and API development. 